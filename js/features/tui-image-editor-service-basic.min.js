/*!
 * Start Bootstrap - SB Admin 2 v4.0.4 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

"use strict";var shapeType,activeObjectId,supportingFileAPI=!!(window.File&&window.FileList&&window.FileReader),rImageType=/data:(image\/.+);base64,/,shapeOptions={},$btns=$(".menu-item"),$btnsActivatable=$btns.filter(".activatable"),$inputImage=$("#input-image-file"),$btnDownload=$("#btn-download"),$btnCancel=$("#btn-cancel"),$btnUndo=$("#btn-undo"),$btnRedo=$("#btn-redo"),$btnReset=$("#btn-reset"),$btnClearObjects=$("#btn-clear-objects"),$btnRemoveActiveObject=$("#btn-remove-active-object"),$btnCrop=$("#btn-crop"),$btnFlip=$("#btn-flip"),$btnRotation=$("#btn-rotation"),$btnDrawLine=$("#btn-draw-line"),$btnDrawShape=$("#btn-draw-shape"),$btnApplyCrop=$("#btn-apply-crop"),$btnCancelCrop=$("#btn-cancel-crop"),$btnFlipX=$("#btn-flip-x"),$btnFlipY=$("#btn-flip-y"),$btnResetFlip=$("#btn-reset-flip"),$btnRotateClockwise=$("#btn-rotate-clockwise"),$btnRotateCounterClockWise=$("#btn-rotate-counter-clockwise"),$btnText=$("#btn-text"),$btnTextStyle=$(".btn-text-style"),$btnAddIcon=$("#btn-add-icon"),$btnRegisterIcon=$("#btn-register-icon"),$btnMaskFilter=$("#btn-mask-filter"),$btnImageFilter=$("#btn-image-filter"),$btnLoadMaskImage=$("#input-mask-image-file"),$btnApplyMask=$("#btn-apply-mask"),$btnClose=$(".menu-close"),$inputRotationRange=$("#input-rotation-range"),$inputBrushWidthRange=$("#input-brush-width-range"),$inputFontSizeRange=$("#input-font-size-range"),$inputStrokeWidthRange=$("#input-stroke-width-range"),$inputCheckTransparent=$("#input-check-transparent"),$inputCheckGrayscale=$("#input-check-grayscale"),$inputCheckInvert=$("#input-check-invert"),$inputCheckSepia=$("#input-check-sepia"),$inputCheckSepia2=$("#input-check-sepia2"),$inputCheckBlur=$("#input-check-blur"),$inputCheckSharpen=$("#input-check-sharpen"),$inputCheckEmboss=$("#input-check-emboss"),$inputCheckRemoveWhite=$("#input-check-remove-white"),$inputRangeRemoveWhiteThreshold=$("#input-range-remove-white-threshold"),$inputRangeRemoveWhiteDistance=$("#input-range-remove-white-distance"),$inputCheckBrightness=$("#input-check-brightness"),$inputRangeBrightnessValue=$("#input-range-brightness-value"),$inputCheckNoise=$("#input-check-noise"),$inputRangeNoiseValue=$("#input-range-noise-value"),$inputCheckGradientTransparency=$("#input-check-gradient-transparancy"),$inputRangeGradientTransparencyValue=$("#input-range-gradient-transparency-value"),$inputCheckPixelate=$("#input-check-pixelate"),$inputRangePixelateValue=$("#input-range-pixelate-value"),$inputCheckTint=$("#input-check-tint"),$inputRangeTintOpacityValue=$("#input-range-tint-opacity-value"),$inputCheckMultiply=$("#input-check-multiply"),$inputCheckBlend=$("#input-check-blend"),$inputCheckColorFilter=$("#input-check-color-filter"),$inputRangeColorFilterValue=$("#input-range-color-filter-value"),$displayingSubMenu=$(),$cropSubMenu=$("#crop-sub-menu"),$flipSubMenu=$("#flip-sub-menu"),$rotationSubMenu=$("#rotation-sub-menu"),$freeDrawingSubMenu=$("#free-drawing-sub-menu"),$drawLineSubMenu=$("#draw-line-sub-menu"),$drawShapeSubMenu=$("#draw-shape-sub-menu"),$textSubMenu=$("#text-sub-menu"),$iconSubMenu=$("#icon-sub-menu"),$filterSubMenu=$("#filter-sub-menu"),$imageFilterSubMenu=$("#image-filter-sub-menu"),$selectLine=$('[name="select-line-type"]'),$selectShapeType=$('[name="select-shape-type"]'),$selectColorType=$('[name="select-color-type"]'),$selectBlendType=$('[name="select-blend-type"]'),imageEditor=new tui.ImageEditor(".tui-image-editor",{cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}),brushColorpicker=tui.colorPicker.create({container:$("#tui-brush-color-picker")[0],color:"#000000"}),textColorpicker=tui.colorPicker.create({container:$("#tui-text-color-picker")[0],color:"#000000"}),shapeColorpicker=tui.colorPicker.create({container:$("#tui-shape-color-picker")[0],color:"#000000"}),iconColorpicker=tui.colorPicker.create({container:$("#tui-icon-color-picker")[0],color:"#000000"}),tintColorpicker=tui.colorPicker.create({container:$("#tui-tint-color-picker")[0],color:"#000000"}),multiplyColorpicker=tui.colorPicker.create({container:$("#tui-multiply-color-picker")[0],color:"#000000"}),blendColorpicker=tui.colorPicker.create({container:$("#tui-blend-color-picker")[0],color:"#00FF00"});function hexToRGBa(e,t){return"rgba("+parseInt(e.slice(1,3),16)+", "+parseInt(e.slice(3,5),16)+", "+parseInt(e.slice(5,7),16)+", "+(t||1)+")"}function base64ToBlob(e){var t,n,i,o,c="";for(t=e.replace(rImageType,function(e,t){return c=t,""}),o=(t=atob(t)).length,n=new Uint8Array(o),i=0;i<o;i+=1)n[i]=t.charCodeAt(i);return new Blob([n],{type:c})}function resizeEditor(){var e=$(".tui-image-editor"),t=$(".tui-image-editor-canvas-container"),n=parseFloat(t.css("max-height"));e.height(n)}function getBrushSettings(){return{width:$inputBrushWidthRange.val(),color:hexToRGBa(brushColorpicker.getColor(),.5)}}function activateShapeMode(){"SHAPE"!==imageEditor.getDrawingMode()&&(imageEditor.stopDrawingMode(),imageEditor.startDrawingMode("SHAPE"))}function activateIconMode(){imageEditor.stopDrawingMode()}function activateTextMode(){"TEXT"!==imageEditor.getDrawingMode()&&(imageEditor.stopDrawingMode(),imageEditor.startDrawingMode("TEXT"))}function setTextToolbar(e){var t=e.fontSize,n=e.fill;$inputFontSizeRange.val(t),textColorpicker.setColor(n)}function setIconToolbar(e){var t=e.fill;iconColorpicker.setColor(t)}function setShapeToolbar(e){var t,n,i,o=$selectColorType.val();"stroke"===o?(i="transparent"===(t=e.stroke))||shapeColorpicker.setColor(t):"fill"===o&&((i="transparent"===(n=e.fill))||shapeColorpicker.setColor(n)),$inputCheckTransparent.prop("checked",i),$inputStrokeWidthRange.val(e.strokeWidth)}function showSubMenu(e){var t;switch(e){case"shape":t=$drawShapeSubMenu;break;case"icon":t=$iconSubMenu;break;case"text":t=$textSubMenu;break;default:t=0}$displayingSubMenu.hide(),$displayingSubMenu=t.show()}function applyOrRemoveFilter(e,t,n){e?imageEditor.applyFilter(t,n).then(function(e){console.log(e)}):imageEditor.removeFilter(t)}function reset(){imageEditor.undo().then(function(){imageEditor.isEmptyUndoStack()||reset()},function(){}),$btnReset.addClass("disabled")}function onClickIconSubMenu(e){var t=e.target||e.srcElement,n=$(t).attr("data-icon-type");void 0===n&&(n=$(t).closest(".icon-text").attr("data-icon-type")),imageEditor.once("mousedown",function(e,t){imageEditor.addIcon(n,{left:t.x,top:t.y}).then(function(e){})})}imageEditor.on({objectAdded:function(e){console.info(e)},undoStackChanged:function(e){e?($btnUndo.removeClass("disabled"),$btnReset.removeClass("disabled")):($btnUndo.addClass("disabled"),$btnReset.addClass("disabled")),resizeEditor()},redoStackChanged:function(e){e?$btnRedo.removeClass("disabled"):$btnRedo.addClass("disabled"),resizeEditor()},objectScaled:function(e){"text"===e.type&&$inputFontSizeRange.val(e.fontSize)},addText:function(e){imageEditor.addText("Double Click",{position:e.originPosition}).then(function(e){console.log(e)})},objectActivated:function(e){activeObjectId=e.id,"rect"===e.type||"circle"===e.type||"triangle"===e.type?(showSubMenu("shape"),setShapeToolbar(e),activateShapeMode()):"icon"===e.type?(showSubMenu("icon"),setIconToolbar(e),activateIconMode()):"text"===e.type&&(showSubMenu("text"),setTextToolbar(e),activateTextMode())},mousedown:function(e,t){$imageFilterSubMenu.is(":visible")&&imageEditor.hasFilter("colorFilter")&&imageEditor.applyFilter("colorFilter",{x:parseInt(t.x,10),y:parseInt(t.y,10)})}}),$btns.on("click",function(){$btnsActivatable.removeClass("active")}),$btnsActivatable.on("click",function(){$(this).addClass("active")}),$btnUndo.on("click",function(){$displayingSubMenu.hide(),$(this).hasClass("disabled")||imageEditor.undo().then(function(){},function(){})}),$btnRedo.on("click",function(){$displayingSubMenu.hide(),$(this).hasClass("disabled")||imageEditor.redo().then(function(){},function(){})}),$btnReset.on("click",function(){$displayingSubMenu.hide(),$(this).hasClass("disabled")||reset()}),$btnCancel.on("click",function(){reset()}),$btnClearObjects.on("click",function(){$displayingSubMenu.hide(),imageEditor.clearObjects()}),$btnRemoveActiveObject.on("click",function(){imageEditor.removeObject(activeObjectId)}),$btnCrop.on("click",function(){imageEditor.startDrawingMode("CROPPER"),$displayingSubMenu.hide(),$displayingSubMenu=$cropSubMenu.show()}),$btnFlip.on("click",function(){imageEditor.stopDrawingMode(),$displayingSubMenu.hide(),$displayingSubMenu=$flipSubMenu.show()}),$btnRotation.on("click",function(){imageEditor.stopDrawingMode(),$displayingSubMenu.hide(),$displayingSubMenu=$rotationSubMenu.show()}),$btnClose.on("click",function(){imageEditor.stopDrawingMode(),$displayingSubMenu.hide()}),$btnApplyCrop.on("click",function(){imageEditor.crop(imageEditor.getCropzoneRect()).then(function(){imageEditor.stopDrawingMode(),resizeEditor()})}),$btnCancelCrop.on("click",function(){imageEditor.stopDrawingMode(),$displayingSubMenu.hide()}),$btnFlipX.on("click",function(){imageEditor.flipX().then(function(e){console.log("flipX: ",e.flipX),console.log("flipY: ",e.flipY),console.log("angle: ",e.angle)})}),$btnFlipY.on("click",function(){imageEditor.flipY().then(function(e){console.log("flipX: ",e.flipX),console.log("flipY: ",e.flipY),console.log("angle: ",e.angle)})}),$btnResetFlip.on("click",function(){imageEditor.resetFlip().then(function(e){console.log("flipX: ",e.flipX),console.log("flipY: ",e.flipY),console.log("angle: ",e.angle)})}),$btnRotateClockwise.on("click",function(){imageEditor.rotate(30)}),$btnRotateCounterClockWise.on("click",function(){imageEditor.rotate(-30)}),$inputRotationRange.on("mousedown",function(){function t(){imageEditor.setAngle(parseInt($inputRotationRange.val(),10)).catch(function(){})}$(document).on("mousemove",t),$(document).on("mouseup",function e(){$(document).off("mousemove",t),$(document).off("mouseup",e)})}),$inputRotationRange.on("change",function(){imageEditor.setAngle(parseInt($inputRotationRange.val(),10)).catch(function(){})}),$inputBrushWidthRange.on("change",function(){imageEditor.setBrush({width:parseInt(this.value,10)})}),$inputImage.on("change",function(e){var t;supportingFileAPI||alert("This browser does not support file-api"),t=e.target.files[0],imageEditor.loadImageFromFile(t).then(function(e){console.log(e),imageEditor.clearUndoStack()})}),$btnDownload.on("click",function(){var e,t,n=imageEditor.getImageName(),i=imageEditor.toDataURL();console.log(n,i),supportingFileAPI?(t=(e=base64ToBlob(i)).type.split("/")[1],n.split(".").pop()!==t&&(n+="."+t),saveAs(e,n)):(alert("This browser needs a file-server"),window.open().document.body.innerHTML="<img src="+i+">")}),$btnDrawLine.on("click",function(){imageEditor.stopDrawingMode(),$displayingSubMenu.hide(),$displayingSubMenu=$drawLineSubMenu.show(),$selectLine.eq(0).change()}),$selectLine.on("change",function(){var e=$(this).val(),t=getBrushSettings();imageEditor.stopDrawingMode(),"freeDrawing"===e?imageEditor.startDrawingMode("FREE_DRAWING",t):imageEditor.startDrawingMode("LINE_DRAWING",t)}),brushColorpicker.on("selectColor",function(e){imageEditor.setBrush({color:hexToRGBa(e.color,.5)})}),$btnDrawShape.on("click",function(){showSubMenu("shape"),shapeType=$('[name="select-shape-type"]:checked').val(),shapeOptions.stroke="#000000",shapeOptions.fill="#ffffff",shapeOptions.strokeWidth=Number($inputStrokeWidthRange.val()),imageEditor.setDrawingShape(shapeType,shapeOptions),activateShapeMode()}),$selectShapeType.on("change",function(){shapeType=$(this).val(),imageEditor.setDrawingShape(shapeType)}),$inputCheckTransparent.on("change",function(){var e,t=$selectColorType.val();e=$(this).prop("checked")?"transparent":shapeColorpicker.getColor(),"stroke"===t?imageEditor.changeShape(activeObjectId,{stroke:e}):"fill"===t&&imageEditor.changeShape(activeObjectId,{fill:e}),imageEditor.setDrawingShape(shapeType,shapeOptions)}),shapeColorpicker.on("selectColor",function(e){var t=$selectColorType.val(),n=$inputCheckTransparent.prop("checked"),i=e.color;n||("stroke"===t?imageEditor.changeShape(activeObjectId,{stroke:i}):"fill"===t&&imageEditor.changeShape(activeObjectId,{fill:i}),imageEditor.setDrawingShape(shapeType,shapeOptions))}),$inputStrokeWidthRange.on("change",function(){var e=Number($(this).val());imageEditor.changeShape(activeObjectId,{strokeWidth:e}),imageEditor.setDrawingShape(shapeType,shapeOptions)}),$btnText.on("click",function(){showSubMenu("text"),activateTextMode()}),$inputFontSizeRange.on("change",function(){imageEditor.changeTextStyle(activeObjectId,{fontSize:parseInt(this.value,10)})}),$btnTextStyle.on("click",function(e){var t,n=$(this).attr("data-style-type");switch(e.stopPropagation(),n){case"b":t={fontWeight:"bold"};break;case"i":t={fontStyle:"italic"};break;case"u":t={textDecoration:"underline"};break;case"l":t={textAlign:"left"};break;case"c":t={textAlign:"center"};break;case"r":t={textAlign:"right"};break;default:t={}}imageEditor.changeTextStyle(activeObjectId,t)}),textColorpicker.on("selectColor",function(e){imageEditor.changeTextStyle(activeObjectId,{fill:e.color})}),$btnAddIcon.on("click",function(){showSubMenu("icon"),activateIconMode()}),imageEditor.registerIcons({star:"M175.785,58.457c0-2.01-1.52-3.259-4.564-3.748l-40.897-5.947l-18.331-37.07c-1.031-2.227-2.363-3.34-3.992-3.34  s-2.96,1.113-3.992,3.34l-18.332,37.07l-40.899,5.947c-3.041,0.489-4.562,1.738-4.562,3.748c0,1.141,0.679,2.445,2.037,3.911  l29.656,28.841l-7.006,40.736c-0.109,0.761-0.163,1.305-0.163,1.63c0,1.141,0.285,2.104,0.855,2.893  c0.57,0.788,1.425,1.181,2.566,1.181c0.978,0,2.064-0.324,3.259-0.977L108,117.443l36.583,19.229  c1.142,0.652,2.228,0.977,3.258,0.977c1.089,0,1.916-0.392,2.486-1.181c0.569-0.788,0.854-1.752,0.854-2.893  c0-0.706-0.027-1.249-0.082-1.63l-7.007-40.736l29.574-28.841C175.08,60.956,175.785,59.652,175.785,58.457z",heart:"M170.652,20.532c-6.898-6.736-16.43-10.103-28.598-10.103c-3.367,0-6.803,0.584-10.306,1.751  c-3.504,1.168-6.763,2.744-9.776,4.726c-3.015,1.982-5.607,3.843-7.781,5.581c-2.172,1.738-4.236,3.585-6.191,5.54  c-1.956-1.955-4.02-3.802-6.192-5.54c-2.173-1.738-4.766-3.598-7.781-5.581c-3.015-1.983-6.274-3.558-9.777-4.726  c-3.503-1.167-6.939-1.751-10.306-1.751c-12.167,0-21.699,3.368-28.597,10.103S35,36.609,35,48.558  c0,3.639,0.639,7.388,1.915,11.243c1.276,3.856,2.73,7.143,4.359,9.858c1.629,2.715,3.476,5.364,5.54,7.944s3.572,4.358,4.522,5.336  c0.95,0.977,1.697,1.683,2.24,2.117l50.839,49.047c0.978,0.979,2.173,1.468,3.585,1.468s2.607-0.489,3.585-1.466l50.758-48.885  C174.781,72.783,181,60.562,181,48.558C181,36.609,177.55,27.267,170.652,20.532z",cut:"M178.959,105.426L137.652,73l41.306-32.431c1.521-1.085,2.199-2.605,2.037-4.562c-0.272-1.9-1.224-3.286-2.853-4.155   l-10.429-5.214c-0.706-0.38-1.493-0.57-2.362-0.57c-0.922,0-1.765,0.217-2.525,0.651L106.61,58.25l-8.962-5.377   c-0.435-0.217-0.761-0.352-0.978-0.407c0.761-2.661,1.032-5.296,0.815-7.903c-0.38-4.182-1.901-8.202-4.562-12.058   c-2.661-3.856-6.246-7.197-10.754-10.021c-7.17-4.563-14.692-6.844-22.568-6.844c-7.441,0-13.47,2.146-18.087,6.437   c-2.335,2.118-4.06,4.643-5.173,7.577c-1.114,2.933-1.534,6.002-1.263,9.206c0.38,4.128,1.901,8.121,4.562,11.977   c2.661,3.857,6.219,7.225,10.673,10.103c7.169,4.563,14.719,6.844,22.649,6.844c4.508,0,8.609-0.841,12.302-2.525   c0.488,0.706,1.086,1.304,1.792,1.793l9.94,5.947l-9.94,5.946c-0.706,0.49-1.303,1.088-1.792,1.793   c-3.693-1.684-7.794-2.525-12.302-2.525c-7.93,0-15.48,2.282-22.649,6.844c-4.454,2.879-8.011,6.248-10.673,10.104   c-2.661,3.857-4.182,7.849-4.562,11.977c-0.597,6.682,1.549,12.303,6.437,16.865c4.671,4.236,10.7,6.355,18.087,6.355   c7.876,0,15.398-2.282,22.568-6.845c4.507-2.878,8.093-6.231,10.754-10.062c2.661-3.83,4.182-7.835,4.562-12.018   c0.217-2.606-0.054-5.242-0.815-7.902c0.217-0.055,0.543-0.19,0.978-0.407l8.962-5.378l56.216,31.529   c0.76,0.435,1.603,0.652,2.526,0.652c0.869,0,1.655-0.189,2.361-0.57l10.43-5.215c1.629-0.869,2.58-2.254,2.852-4.154   C181.158,108.033,180.48,106.514,178.959,105.426z M82.169,51.816c-2.118,1.956-5.187,2.934-9.207,2.934   c-5.432,0-10.646-1.603-15.643-4.807c-4.399-2.77-7.278-5.948-8.636-9.533c-1.358-3.584-0.788-6.518,1.711-8.799   c2.119-1.955,5.188-2.933,9.207-2.933c5.432,0,10.646,1.603,15.643,4.807c4.399,2.77,7.278,5.947,8.636,9.532   S84.668,49.535,82.169,51.816z M83.88,102.982c-1.358,3.584-4.237,6.762-8.636,9.533c-4.997,3.203-10.211,4.806-15.643,4.807   c-4.019,0-7.088-0.979-9.207-2.934c-2.499-2.281-3.069-5.215-1.711-8.8s4.237-6.761,8.636-9.532   c4.997-3.203,10.211-4.807,15.643-4.807c4.019,0,7.088,0.979,9.207,2.934C84.668,96.464,85.238,99.398,83.88,102.982z    M89.746,62.571l0.732-0.731c0.055-0.054,0.136-0.122,0.245-0.203c0.109-0.082,0.218-0.177,0.326-0.285   c0.272-0.218,0.598-0.544,0.978-0.979c0.38-0.434,0.652-0.733,0.815-0.896l2.118-2.118l6.437,3.829l-1.141,0.651   c-1.792,1.086-2.688,2.607-2.688,4.562v0.896L89.746,62.571z M107.996,80.821l-13.037,7.82l-2.118-2.118   c-0.217-0.217-0.516-0.543-0.896-0.979c-0.38-0.435-0.679-0.761-0.896-0.978c-0.271-0.218-0.461-0.381-0.57-0.489l-0.733-0.65   l13.036-7.821v-9.207l62.571-35.115l10.428,5.215l-59.965,46.929L107.996,80.821z M165.354,114.714l-47.418-26.642   c0.599-0.217,0.953-0.407,1.06-0.57l14.422-11.243l42.365,33.241L165.354,114.714z",bubble:"M200.401,10.445H40.73c-16.534,0-29.59,10.725-29.59,25.148v95.762c0,14.423,13.056,27.09,29.59,27.09h10.41V201  l69.425-42.555h79.835c16.534,0,29.739-12.667,29.739-27.09V35.593C230.14,21.17,216.934,10.445,200.401,10.445z",check:"M66.524,139.417L7.653,80.546c-3.536-3.537-3.536-9.271,0-12.809l12.808-12.809c3.537-3.537,9.272-3.537,12.809,0  l39.657,39.659l84.944-84.943c3.537-3.537,9.271-3.537,12.808,0l12.808,12.809c3.537,3.537,3.537,9.271,0,12.809L79.332,139.417  C75.795,142.954,70.061,142.954,66.524,139.417L66.524,139.417z"}),$btnRegisterIcon.on("click",function(){$iconSubMenu.find(".menu-item").eq(3).after('<li id="customArrow" class="menu-item icon-text" data-icon-type="customArrow">↑</li>'),imageEditor.registerIcons({customArrow:"M 60 0 L 120 60 H 90 L 75 45 V 180 H 45 V 45 L 30 60 H 0 Z"}),$btnRegisterIcon.off("click"),$iconSubMenu.on("click","#customArrow",onClickIconSubMenu)}),$iconSubMenu.on("click",".icon-text",onClickIconSubMenu),iconColorpicker.on("selectColor",function(e){imageEditor.changeIconColor(activeObjectId,e.color)}),$btnMaskFilter.on("click",function(){imageEditor.stopDrawingMode(),$displayingSubMenu.hide(),$displayingSubMenu=$filterSubMenu.show()}),$btnImageFilter.on("click",function(){var e={grayscale:$inputCheckGrayscale,invert:$inputCheckInvert,sepia:$inputCheckSepia,sepia2:$inputCheckSepia2,blur:$inputCheckBlur,shapren:$inputCheckSharpen,emboss:$inputCheckEmboss,removeWhite:$inputCheckRemoveWhite,brightness:$inputCheckBrightness,noise:$inputCheckNoise,gradientTransparency:$inputCheckGradientTransparency,pixelate:$inputCheckPixelate,tint:$inputCheckTint,multiply:$inputCheckMultiply,blend:$inputCheckBlend,colorFilter:$inputCheckColorFilter};tui.util.forEach(e,function(e,t){e.prop("checked",imageEditor.hasFilter(t))}),$displayingSubMenu.hide(),$displayingSubMenu=$imageFilterSubMenu.show()}),$btnLoadMaskImage.on("change",function(){var t,e;supportingFileAPI||alert("This browser does not support file-api"),(t=event.target.files[0])&&(e=URL.createObjectURL(t),imageEditor.loadImageFromURL(imageEditor.toDataURL(),"FilterImage").then(function(){imageEditor.addImageObject(e).then(function(e){URL.revokeObjectURL(t),console.log(e)})}))}),$btnApplyMask.on("click",function(){imageEditor.applyFilter("mask",{maskObjId:activeObjectId}).then(function(e){console.log(e)})}),$inputCheckGrayscale.on("change",function(){applyOrRemoveFilter(this.checked,"Grayscale",null)}),$inputCheckInvert.on("change",function(){applyOrRemoveFilter(this.checked,"Invert",null)}),$inputCheckSepia.on("change",function(){applyOrRemoveFilter(this.checked,"Sepia",null)}),$inputCheckSepia2.on("change",function(){applyOrRemoveFilter(this.checked,"Sepia2",null)}),$inputCheckBlur.on("change",function(){applyOrRemoveFilter(this.checked,"Blur",null)}),$inputCheckSharpen.on("change",function(){applyOrRemoveFilter(this.checked,"Sharpen",null)}),$inputCheckEmboss.on("change",function(){applyOrRemoveFilter(this.checked,"Emboss",null)}),$inputCheckRemoveWhite.on("change",function(){applyOrRemoveFilter(this.checked,"removeWhite",{threshold:parseInt($inputRangeRemoveWhiteThreshold.val(),10),distance:parseInt($inputRangeRemoveWhiteDistance.val(),10)})}),$inputRangeRemoveWhiteThreshold.on("change",function(){applyOrRemoveFilter($inputCheckRemoveWhite.is(":checked"),"removeWhite",{threshold:parseInt(this.value,10)})}),$inputRangeRemoveWhiteDistance.on("change",function(){applyOrRemoveFilter($inputCheckRemoveWhite.is(":checked"),"removeWhite",{distance:parseInt(this.value,10)})}),$inputCheckBrightness.on("change",function(){applyOrRemoveFilter(this.checked,"brightness",{brightness:parseInt($inputRangeBrightnessValue.val(),10)})}),$inputRangeBrightnessValue.on("change",function(){applyOrRemoveFilter($inputCheckBrightness.is(":checked"),"brightness",{brightness:parseInt(this.value,10)})}),$inputCheckNoise.on("change",function(){applyOrRemoveFilter(this.checked,"noise",{noise:parseInt($inputRangeNoiseValue.val(),10)})}),$inputRangeNoiseValue.on("change",function(){applyOrRemoveFilter($inputCheckNoise.is(":checked"),"noise",{noise:parseInt(this.value,10)})}),$inputCheckGradientTransparency.on("change",function(){applyOrRemoveFilter(this.checked,"gradientTransparency",{threshold:parseInt($inputRangeGradientTransparencyValue.val(),10)})}),$inputRangeGradientTransparencyValue.on("change",function(){applyOrRemoveFilter($inputCheckGradientTransparency.is(":checked"),"gradientTransparency",{threshold:parseInt(this.value,10)})}),$inputCheckPixelate.on("change",function(){applyOrRemoveFilter(this.checked,"pixelate",{blocksize:parseInt($inputRangePixelateValue.val(),10)})}),$inputRangePixelateValue.on("change",function(){applyOrRemoveFilter($inputCheckPixelate.is(":checked"),"pixelate",{blocksize:parseInt(this.value,10)})}),$inputCheckTint.on("change",function(){applyOrRemoveFilter(this.checked,"tint",{color:tintColorpicker.getColor(),opacity:parseFloat($inputRangeTintOpacityValue.val())})}),tintColorpicker.on("selectColor",function(e){applyOrRemoveFilter($inputCheckTint.is(":checked"),"tint",{color:e.color})}),$inputRangeTintOpacityValue.on("change",function(){applyOrRemoveFilter($inputCheckTint.is(":checked"),"tint",{opacity:parseFloat($inputRangeTintOpacityValue.val())})}),$inputCheckMultiply.on("change",function(){applyOrRemoveFilter(this.checked,"multiply",{color:multiplyColorpicker.getColor()})}),multiplyColorpicker.on("selectColor",function(e){applyOrRemoveFilter($inputCheckMultiply.is(":checked"),"multiply",{color:e.color})}),$inputCheckBlend.on("change",function(){applyOrRemoveFilter(this.checked,"blend",{color:blendColorpicker.getColor(),mode:$selectBlendType.val()})}),blendColorpicker.on("selectColor",function(e){applyOrRemoveFilter($inputCheckBlend.is(":checked"),"blend",{color:e.color})}),$selectBlendType.on("change",function(){applyOrRemoveFilter($inputCheckBlend.is(":checked"),"blend",{mode:this.value})}),$inputCheckColorFilter.on("change",function(){applyOrRemoveFilter(this.checked,"colorFilter",{color:"#FFFFFF",threshold:$inputRangeColorFilterValue.val()})}),$inputRangeColorFilterValue.on("change",function(){applyOrRemoveFilter($inputCheckColorFilter.is(":checked"),"colorFilter",{threshold:this.value})}),$(".menu").on("selectstart",function(){return!1});